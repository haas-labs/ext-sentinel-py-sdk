project:
  name: BlockTxDetector
  description: >
    Simple Block TX Detector for detecting mulitple transactions towards DEX inside of one block

sentries:
- name: BlockTxDetector
  type: examples.block_tx.sentry.BlockDetector
  parameters:
    network: ethereum
  inputs:
  # - fs_transactions
  - ws_transactions
  outputs:
  - events
  databases:
  - dex_address

inputs:

- id: fs_transactions
  type: sentinel.channels.fs.transactions.InboundTransactionsChannel
  parameters:
    path: ./examples/block_tx/data/transactions.json

- id: ws_transactions
  type: sentinel.channels.ws.transactions.InboundTransactionChannel
  parameters:
    server_uri: ws://ethereum-ingest-proxy.dev.hacken.cloud/849dd74c05160b3ebffb2d5547164337a204b7f88d0322d25e18684c0a2d248a

outputs:

- id: events
  type: sentinel.channels.fs.common.OutboundFileChannel
  parameters:
    record_type: sentinel.models.event.Event
    path: ./examples/block_tx/events/simple-block-tx.json
    mode: overwrite

databases:

- id: dex_address
  type: sentinel.db.dex.LocalDEXAddresses
  description: >
    Simple local database for DEX addresses
  parameters:
    path: ./examples/block_tx/data/dex.list 
    # path: ./examples/block_tx/data/mixers.list
